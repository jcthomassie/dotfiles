# Takes two arguments:
#   - Bastion public DNS/IP
#   - EC2 private DNS/IP

ssh_bastion () {
    local IP_BASTION=${1:?missing Bastion IP input}
    local IP_INSTANCE=${2:?missing EC2 IP input}

    midway && eval `ssh-agent` && ssh-add
    ssh -A $IP_BASTION
    ssh -A $IP_INSTANCE
}

ssh_bastion "$@"
